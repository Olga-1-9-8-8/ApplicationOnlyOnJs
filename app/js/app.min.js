const imageProductCardEl=findImageProductCard();let formEl=findForm(),inputsFormEl=findFormInputs(formEl),textareaFormEl=findFormTextarea(formEl),submitFormEl=findFormSubmit(formEl),buttonReviewEl=findButtonReviw(),buttonResetEl=findButtonReset(),newReviewEl=findNewReview(),listMessages=findReviewList(),ratingTotalEl=findTotalRatingEl(),arrRating=[],counterEl=findCounter(),counterTextEl=findCountText(),counter=0;function findImageProductCard(){return document.querySelector(".product-card__image")}function findForm(){return document.forms.review}function findFormInputs(e){return e.querySelectorAll(".reviews__input")}function findFormTextarea(e){return e.elements.textarea}function findFormSubmit(e){return e.elements.submit}function findButtonReviw(){return document.querySelector(".reviews__button-submit")}function findButtonReset(){return document.querySelector(".reviews__button-reset")}function findNewReview(){return document.querySelector(".reviews__form-wrapper")}function findReviewList(){return document.querySelector(".reviews__listMessages")}function findTotalRatingEl(){return document.getElementById("starsInner")}function findCounter(){return document.querySelector(".card__counter-result")}function findCountText(){return document.querySelector(".card__counter-text")}function zoomImage(e){e.addEventListener("mousemove",(function(t){let n=e.offsetWidth,i=e.offsetHeight,r=t.offsetX/n*100,o=t.offsetY/i*100;e.style.backgroundPosition=`${r}% ${o}%`})),e.addEventListener("mouseleave",(function(){e.style.backgroundPosition="center"}))}function floatingLabelColorChange(e){for(let t of e)t.onblur=function(){t.value?t.nextElementSibling.style.color="white":t.nextElementSibling.style.color=""}}function bindButtonReview(e,t){e.addEventListener("click",(function(){t.hidden=!t.hidden,"Написать Отзыв"==e.innerHTML?e.innerHTML="Закрыть Отзыв":e.innerHTML="Написать Отзыв"}))}function bindButtonFormSubmit(e){e.addEventListener("submit",(async function(t){t.preventDefault();let n=formatDate(new Date),i=new FormData(this);i.append("date",n);await fetch("https://review-app-6ea6e-default-rtdb.firebaseio.com/listEl.json",{method:"POST",body:JSON.stringify(Object.fromEntries(i))});e.reset(),buttonReviewEl.dispatchEvent(new Event("click"))}))}function formatDate(e){return`${e.getDate()} ${["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"][e.getMonth()]} ${e.getFullYear()}   ${e.getHours()}:${(e.getMinutes()<10?"0":"")+e.getMinutes()}`}function getTotalRating(e){return+(e.reduce((e,t)=>e+t,0)/e.length).toFixed(1)}function publishRating(e,t){let n=e/5*100,i=10*Math.round(n/10)+"%";t.style.width=i}function publishCounter(e,t){t.innerHTML=e}function changeCounterText(e,t){1==t.innerHTML||21==t.innerHTML||31==t.innerHTML||41==t.innerHTML||51==t.innerHTML?e.innerHTML="Отзыв":2!=t.innerHTML&&3!=t.innerHTML&&4!=t.innerHTML&&22!=t.innerHTML&&23!=t.innerHTML&&24!=t.innerHTML||(e.innerHTML="Отзыва")}zoomImage(imageProductCardEl),floatingLabelColorChange(inputsFormEl),bindButtonReview(buttonReviewEl,newReviewEl,buttonResetEl),bindButtonFormSubmit(formEl);