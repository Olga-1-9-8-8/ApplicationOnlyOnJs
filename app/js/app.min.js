const imageProductCardEl=findImageProductCard();let formEl=findForm(),inputsFormEl=findFormInputs(formEl),textareaFormEl=findFormTextarea(formEl),submitFormEl=findFormSubmit(formEl),buttonReviewEl=findButtonReviw(),buttonResetEl=findButtonReset(),newReviewEl=findNewReview(),listMessages=findReviewList(),ratingTotalEl=findTotalRatingEl(),arrRating=[],counterEl=findCounter(),counterTextEl=findCountText(),counter=0,buttonSortData=findButtonSortData(),buttonSortRating=findButtonSortData(),messagesWrapper=findMessagesWrapper();function findImageProductCard(){return document.querySelector(".product-card__image")}function findForm(){return document.forms.review}function findFormInputs(e){return e.querySelectorAll(".reviews__input")}function findFormTextarea(e){return e.elements.textarea}function findFormSubmit(e){return e.elements.submit}function findButtonReviw(){return document.querySelector(".reviews__button")}function findButtonReset(){return document.querySelector(".reviews__button-reset")}function findNewReview(){return document.querySelector(".reviews__form-wrapper")}function findReviewList(){return document.querySelector(".reviews__listMessages")}function findTotalRatingEl(){return document.getElementById("starsInner")}function findCounter(){return document.querySelector(".card__counter-result")}function findCountText(){return document.querySelector(".card__counter-text")}function findButtonSortData(){return document.querySelector(".reviews__sortData")}function findButtonSortRating(){return document.querySelector(".reviews__sortRating")}function findMessagesWrapper(){return document.querySelector(".reviews__listMessages")}function zoomImage(e){e.addEventListener("mousemove",(function(t){let n=e.offsetWidth,o=e.offsetHeight,r=t.offsetX/n*100,i=t.offsetY/o*100;e.style.backgroundPosition=`${r}% ${i}%`})),e.addEventListener("mouseleave",(function(){e.style.backgroundPosition="center"}))}function floatingLabelColorChange(e){for(let t of e)t.onblur=function(){t.value?t.nextElementSibling.style.color="white":t.nextElementSibling.style.color=""}}function bindButtonReview(e,t,n,o){e.addEventListener("click",(function(){t.hidden=!t.hidden,n.reset(),showFloatLabeles(o),changeTextInButtonReview(e)}))}function bindButtonReset(e,t,n,o){t.addEventListener("click",(function(){showFloatLabeles(o),n.hidden=!n.hidden,changeTextInButtonReview(e)}))}function changeTextInButtonReview(e){"Написать Отзыв"==e.innerHTML?e.innerHTML="Закрыть Отзыв":e.innerHTML="Написать Отзыв"}function showFloatLabeles(e){for(let t of e)t.nextElementSibling.style.color=""}function bindButtonFormSubmit(e){e.addEventListener("submit",(async function(t){t.preventDefault();let n=formatDate(new Date),o=new FormData(this);o.append("date",n),o.append("dateMillisecondes",Date.now());await fetch("https://review-app-6ea6e-default-rtdb.firebaseio.com/listEl.json",{method:"POST",body:JSON.stringify(Object.fromEntries(o))});e.reset(),buttonReviewEl.dispatchEvent(new Event("click"))}))}function formatDate(e){return`${e.getDate()} ${["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"][e.getMonth()]} ${e.getFullYear()}   ${e.getHours()}:${(e.getMinutes()<10?"0":"")+e.getMinutes()}`}function getTotalRating(e){return+(e.reduce((e,t)=>e+t,0)/e.length).toFixed(1)}function publishRating(e,t){let n=e/5*100,o=10*Math.round(n/10)+"%";t.style.width=o}function publishCounter(e,t){t.innerHTML=e}function changeCounterText(e,t){1==t.innerHTML||21==t.innerHTML||31==t.innerHTML||41==t.innerHTML||51==t.innerHTML?e.innerHTML="Отзыв":2!=t.innerHTML&&3!=t.innerHTML&&4!=t.innerHTML&&22!=t.innerHTML&&23!=t.innerHTML&&24!=t.innerHTML||(e.innerHTML="Отзыва")}function sortMessagesData(e,t){let n=[],o=t.children;for(let e of o)n.push(e);o.sort((e,t)=>+e.dataset.sortDate<+t.dataset.sortDate?1:-1),t.innerHTML="",console.log(t),e.addEventListener("click",()=>{})}zoomImage(imageProductCardEl),floatingLabelColorChange(inputsFormEl),bindButtonReview(buttonReviewEl,newReviewEl,formEl,inputsFormEl),bindButtonReset(buttonReviewEl,buttonResetEl,newReviewEl,inputsFormEl),bindButtonFormSubmit(formEl);